<h1>Bem-vindo ao sistema de trocas de moedas</h1>

<% if flash[:success] %>
    <div><%= flash[:success] %></div>
<% end %>
<%= form_tag("#{root_path}filter_currency") do %>
  <%= label_tag 'currency', 'Filtro por moeda' %>
  <%= select_tag 'currency', raw("<option value='dollar'>Dólar</option>\
                                  <option value='real'>Real</option>")%>
  <%= submit_tag 'Filtrar' %>
<% end %>
<% if @transactions.none? #'inverse' of .any? %>
  <p>Você ainda não possui transações cadastradas.</p>
<% else %>
  <% @transactions.each do |transaction| %>
    <p>Identificador <br><%= link_to(transaction.id, controller: 'transactions', action: 'show', id: transaction.id) %></p>
    <p>Quantidade <br><%= transaction.amount %></p>
    <p>Moeda <br><%= transaction.to_pt_BR(transaction.currency) %></p>
    <p>Tipo <br><%= transaction.to_pt_BR(transaction.transaction_type) %></p>
    <p>Total <br><%= number_to_currency(transaction.total, format: '%u %n', negative_format: '%u -%n') %></p>
    <p><%= link_to 'Editar', edit_transaction_path(transaction) %></p>
    <br>
  <% end %>
  <p>Total agregado <br><%= number_to_currency(@transactions.sum(:total), format: '%u %n', negative_format: '%u -%n') %></p>
<% end %>
<%= link_to 'Ver todas', "#{root_path}all" %>
<%= link_to 'Registrar transação', controller: 'transactions', action:'new' %>
<%= link_to 'Cadastrar usuário', controller: 'users', action: 'new' %>
<%= link_to 'Usuários', controller: 'users', action: 'index' %>
